<UserControl
    x:Class="JoyLeeWrite.Views.SeriesDetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:JoyLeeWrite.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="1040"
    d:DesignWidth="1960"
    mc:Ignorable="d">
    <UserControl.Resources>
        <!--  Button Style  -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3B5998" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="20,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2d4373" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Genre Tag Style  -->
        <Style x:Key="GenreTag" TargetType="Border">
            <Setter Property="Background" Value="#E8EAF6" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="Margin" Value="0,0,8,8" />
        </Style>

        <!--  Chapter Item Style  -->
        <Style x:Key="ChapterItem" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="20" />
            <Setter Property="Margin" Value="0,0,0,12" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid>
            <!--  Main Container  -->
            <Border
                Margin="8"
                Background="White"
                CornerRadius="12">
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="10"
                        Opacity="0.1"
                        ShadowDepth="2"
                        Color="#000000" />
                </Border.Effect>

                <StackPanel>
                    <!--  Series Header  -->
                    <Border
                        Margin="24"
                        Padding="32"
                        CornerRadius="12">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Offset="0" Color="#3B82F6" />
                                <GradientStop Offset="1" Color="#1E3A5F" />
                            </LinearGradientBrush>
                        </Border.Background>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <!--  Cột ảnh  -->
                                <ColumnDefinition Width="30" />
                                <!--  Khoảng cách  -->
                                <ColumnDefinition Width="*" />
                                <!--  Cột nội dung  -->
                            </Grid.ColumnDefinitions>

                            <!--  ẢNH BÌA  -->
                            <Border
                                Width="240"
                                Height="360"
                                HorizontalAlignment="Left"
                                BorderBrush="#80FFFFFF"
                                BorderThickness="2"
                                CornerRadius="8">
                                <Rectangle RadiusX="12" RadiusY="12">
                                    <Rectangle.Fill>
                                        <ImageBrush ImageSource="{Binding CoverImage}" Stretch="UniformToFill" />
                                    </Rectangle.Fill>
                                </Rectangle>
                                <Border.Effect>
                                    <DropShadowEffect
                                        BlurRadius="10"
                                        Opacity="0.3"
                                        ShadowDepth="4" />
                                </Border.Effect>
                            </Border>

                            <!--  NỘI DUNG  -->
                            <StackPanel Grid.Column="2" VerticalAlignment="Top">
                                <!--  Dòng đầu: Tiêu đề + Nút chỉnh sửa  -->
                                <Grid>
                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="32"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Text="{Binding Title}" />

                                    <Button
                                        Padding="20,10"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="#FF9800"
                                        BorderThickness="0"
                                        Command="{Binding EditSeriesCommand}"
                                        Content="✏️ Chỉnh sửa Series"
                                        Cursor="Hand"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Style="{StaticResource ModernButton}">
                                        <Button.Effect>
                                            <DropShadowEffect
                                                BlurRadius="8"
                                                Opacity="0.3"
                                                ShadowDepth="2"
                                                Color="#000000" />
                                        </Button.Effect>
                                    </Button>
                                </Grid>

                                <!--  Meta info  -->
                                <StackPanel Margin="0,12,0,16" Orientation="Horizontal">
                                    <Border
                                        Margin="0,0,12,0"
                                        Padding="12,6"
                                        Background="#4CAF50"
                                        CornerRadius="12">
                                        <TextBlock
                                            FontSize="13"
                                            FontWeight="Medium"
                                            Foreground="White"
                                            Text="{Binding Status}" />
                                    </Border>

                                    <StackPanel Margin="12,0" Orientation="Horizontal">
                                        <TextBlock
                                            Margin="0,0,6,0"
                                            FontSize="16"
                                            Text="📖" />
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            Foreground="White"
                                            Text="{Binding ChapterCount, StringFormat={}{0} Chapters}" />
                                    </StackPanel>

                                    <StackPanel Margin="12,0" Orientation="Horizontal">
                                        <TextBlock
                                            Margin="0,0,6,0"
                                            FontSize="16"
                                            Text="📅" />
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            Foreground="White"
                                            Text="{Binding CreatedDate, StringFormat='{}{0:dd/MM/yyyy}'}" />
                                    </StackPanel>
                                </StackPanel>

                                <!--  Genres  -->
                                <WrapPanel Margin="0,0,0,16">
                                    <Border Style="{StaticResource GenreTag}">
                                        <TextBlock
                                            FontSize="13"
                                            Foreground="#3F51B5"
                                            Text="Adventure" />
                                    </Border>
                                    <Border Style="{StaticResource GenreTag}">
                                        <TextBlock
                                            FontSize="13"
                                            Foreground="#3F51B5"
                                            Text="Fantasy" />
                                    </Border>
                                    <Border Style="{StaticResource GenreTag}">
                                        <TextBlock
                                            FontSize="13"
                                            Foreground="#3F51B5"
                                            Text="Mystery" />
                                    </Border>
                                </WrapPanel>

                                <!--  Mô tả  -->
                                <TextBlock
                                    MaxWidth="600"
                                    FontSize="14"
                                    Foreground="#E0E0E0"
                                    Text="{Binding Description}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                        </Grid>
                    </Border>


                    <!--  Series Description  -->
                    <Border
                        Padding="32"
                        BorderBrush="#E0E0E0"
                        BorderThickness="0,0,0,1">
                        <StackPanel>
                            <TextBlock
                                Margin="0,0,0,12"
                                FontSize="18"
                                FontWeight="SemiBold"
                                Foreground="#212121"
                                Text="Mô tả" />
                            <TextBlock
                                FontSize="14"
                                Foreground="#616161"
                                LineHeight="24"
                                TextWrapping="Wrap">
                                <Run Text="{Binding Description}" />
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!--  Chapters Section  -->
                    <Border Padding="32">
                        <StackPanel>
                            <!--  Section Header  -->
                            <Grid Margin="0,0,0,20">
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="20"
                                    FontWeight="SemiBold"
                                    Foreground="#212121"
                                    Text="Danh sách Chapter" />

                                <Button
                                    HorizontalAlignment="Right"
                                    Background="#4CAF50"
                                    Click="AddChapter_Click"
                                    Content="+ Thêm Chapter"
                                    Style="{StaticResource ModernButton}" />
                            </Grid>

                            <!--  Chapters List  -->
                            <ItemsControl x:Name="ChaptersList">
                                <!--  Chapter 1  -->
                                <Border MouseLeftButtonDown="Chapter_Click" Style="{StaticResource ChapterItem}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <!--  Chapter Number  -->
                                        <Border
                                            Grid.Column="0"
                                            Width="50"
                                            Height="50"
                                            Margin="0,0,16,0"
                                            Background="#E3F2FD"
                                            CornerRadius="8">
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                FontSize="20"
                                                FontWeight="Bold"
                                                Foreground="#1976D2"
                                                Text="1" />
                                        </Border>

                                        <!--  Chapter Info  -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock
                                                Margin="0,0,0,6"
                                                FontSize="16"
                                                FontWeight="SemiBold"
                                                Foreground="#212121"
                                                Text="Chapter 1: The Beginning" />
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock
                                                    Margin="0,0,16,0"
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="📝 2,500 từ" />
                                                <TextBlock
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="🕒 Cập nhật: 01/11/2025" />
                                            </StackPanel>
                                        </StackPanel>

                                        <!--  Status  -->
                                        <Border
                                            Grid.Column="2"
                                            Padding="12,6"
                                            VerticalAlignment="Center"
                                            Background="#E8F5E9"
                                            CornerRadius="12">
                                            <TextBlock
                                                FontSize="13"
                                                FontWeight="Medium"
                                                Foreground="#4CAF50"
                                                Text="✓ Hoàn thành" />
                                        </Border>
                                    </Grid>
                                </Border>

                                <!--  Chapter 2  -->
                                <Border MouseLeftButtonDown="Chapter_Click" Style="{StaticResource ChapterItem}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Border
                                            Grid.Column="0"
                                            Width="50"
                                            Height="50"
                                            Margin="0,0,16,0"
                                            Background="#E3F2FD"
                                            CornerRadius="8">
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                FontSize="20"
                                                FontWeight="Bold"
                                                Foreground="#1976D2"
                                                Text="2" />
                                        </Border>

                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock
                                                Margin="0,0,0,6"
                                                FontSize="16"
                                                FontWeight="SemiBold"
                                                Foreground="#212121"
                                                Text="Chapter 2: The Journey Begins" />
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock
                                                    Margin="0,0,16,0"
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="📝 3,200 từ" />
                                                <TextBlock
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="🕒 Cập nhật: 31/10/2025" />
                                            </StackPanel>
                                        </StackPanel>

                                        <Border
                                            Grid.Column="2"
                                            Padding="12,6"
                                            VerticalAlignment="Center"
                                            Background="#FFF3E0"
                                            CornerRadius="12">
                                            <TextBlock
                                                FontSize="13"
                                                FontWeight="Medium"
                                                Foreground="#FF9800"
                                                Text="✍️ Đang viết" />
                                        </Border>
                                    </Grid>
                                </Border>

                                <!--  Chapter 3  -->
                                <Border MouseLeftButtonDown="Chapter_Click" Style="{StaticResource ChapterItem}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Border
                                            Grid.Column="0"
                                            Width="50"
                                            Height="50"
                                            Margin="0,0,16,0"
                                            Background="#E3F2FD"
                                            CornerRadius="8">
                                            <TextBlock
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                FontSize="20"
                                                FontWeight="Bold"
                                                Foreground="#1976D2"
                                                Text="3" />
                                        </Border>

                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock
                                                Margin="0,0,0,6"
                                                FontSize="16"
                                                FontWeight="SemiBold"
                                                Foreground="#212121"
                                                Text="Chapter 3: Mysterious Encounter" />
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock
                                                    Margin="0,0,16,0"
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="📝 1,800 từ" />
                                                <TextBlock
                                                    FontSize="13"
                                                    Foreground="#757575"
                                                    Text="🕒 Cập nhật: 30/10/2025" />
                                            </StackPanel>
                                        </StackPanel>

                                        <Border
                                            Grid.Column="2"
                                            Padding="12,6"
                                            VerticalAlignment="Center"
                                            Background="#FFEBEE"
                                            CornerRadius="12">
                                            <TextBlock
                                                FontSize="13"
                                                FontWeight="Medium"
                                                Foreground="#F44336"
                                                Text="📋 Nháp" />
                                        </Border>
                                    </Grid>
                                </Border>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>
