<UserControl
    x:Class="JoyLeeWrite.Views.StatisticsDetailView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:JoyLeeWrite.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <!--  Card Style  -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="24" />
            <Setter Property="Margin" Value="10" />
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect
                        BlurRadius="20"
                        Opacity="0.08"
                        ShadowDepth="0"
                        Color="#000000" />
                </Setter.Value>
            </Setter>
        </Style>

        <!--  Icon Style  -->
        <Style x:Key="IconStyle" TargetType="Border">
            <Setter Property="Width" Value="40" />
            <Setter Property="Height" Value="40" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="VerticalAlignment" Value="Top" />
        </Style>

        <!--  Title Style  -->
        <Style x:Key="TitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="#64748B" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>

        <!--  Value Style  -->
        <Style x:Key="ValueStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="36" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#0F172A" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>

        <!--  Subtitle Style  -->
        <Style x:Key="SubtitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Foreground" Value="#94A3B8" />
        </Style>

    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <StackPanel Grid.Row="0" Margin="10,0,0,30">
            <TextBlock
                FontSize="32"
                FontWeight="Bold"
                Foreground="#0F172A"
                Text="Statistics" />
            <TextBlock
                Margin="0,8,0,0"
                FontSize="15"
                Foreground="#64748B"
                Text="Overview of your writing activity" />
        </StackPanel>

        <!--  First Row  -->
        <UniformGrid
            Grid.Row="1"
            Margin="0,0,0,0"
            Columns="3">
            <!--  Tổng Số Truyện  -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource TitleStyle}" Text="Total Series" />
                            <Border Background="#EEF2FF" Style="{StaticResource IconStyle}">
                                <Path
                                    Width="20"
                                    Height="20"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"
                                    Fill="#6366F1"
                                    Stretch="Uniform" />
                            </Border>
                        </Grid>
                        <TextBlock Style="{StaticResource ValueStyle}" Text="{Binding TotalSeries}" />
                        <TextBlock Style="{StaticResource SubtitleStyle}" Text="Series in progress" />
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Tổng Số Chương  -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource TitleStyle}" Text="Total Chapters" />
                            <Border Background="#DBEAFE" Style="{StaticResource IconStyle}">
                                <Path
                                    Width="20"
                                    Height="20"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z"
                                    Fill="#3B82F6"
                                    Stretch="Uniform" />
                            </Border>
                        </Grid>
                        <TextBlock Style="{StaticResource ValueStyle}" Text="{Binding TotalChapters}" />
                        <TextBlock Style="{StaticResource SubtitleStyle}" Text="Finish chapter" />
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Tổng Số Từ  -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource TitleStyle}" Text="Total Words" />
                            <Border Background="#CCFBF1" Style="{StaticResource IconStyle}">
                                <Path
                                    Width="20"
                                    Height="20"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM9 11H7V9H9V11ZM13 11H11V9H13V11ZM17 11H15V9H17V11Z"
                                    Fill="#14B8A6"
                                    Stretch="Uniform" />
                            </Border>
                        </Grid>
                        <TextBlock Style="{StaticResource ValueStyle}" Text="{Binding TotalWords}" />
                        <TextBlock Style="{StaticResource SubtitleStyle}" Text="Word written" />
                    </StackPanel>
                </Grid>
            </Border>
        </UniformGrid>

        <!--  Second Row  -->
        <UniformGrid
            Grid.Row="2"
            Margin="0,0,0,0"
            Columns="2">


            <!--  Thời Gian Viết  -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource TitleStyle}" Text="Writing Time" />
                            <Border Background="#FEF3C7" Style="{StaticResource IconStyle}">
                                <Path
                                    Width="20"
                                    Height="20"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z"
                                    Fill="#F59E0B"
                                    Stretch="Uniform" />
                            </Border>
                        </Grid>
                        <TextBlock Style="{StaticResource ValueStyle}" Text="{Binding WritingTime}" />
                        <TextBlock Style="{StaticResource SubtitleStyle}" Text="This week" />
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Trung Bình/Ngày  -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <StackPanel>
                        <Grid>
                            <TextBlock Style="{StaticResource TitleStyle}" Text="Average/Day" />
                            <Border Background="#DBEAFE" Style="{StaticResource IconStyle}">
                                <Path
                                    Width="20"
                                    Height="20"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M9 11H7V13H9V11ZM13 11H11V13H13V11ZM17 11H15V13H17V11ZM19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM19 20H5V9H19V20Z"
                                    Fill="#3B82F6"
                                    Stretch="Uniform" />
                            </Border>
                        </Grid>
                        <TextBlock Style="{StaticResource ValueStyle}" Text="{Binding AverageWord}" />
                        <TextBlock Style="{StaticResource SubtitleStyle}" Text="Words written every day" />
                    </StackPanel>
                </Grid>
            </Border>
        </UniformGrid>
        <Border Grid.Row="4" Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Margin="0,0,0,30"
                    FontSize="24"
                    FontWeight="Bold"
                    Foreground="#0F172A"
                    Text="This Week's Writing Activity" />

                <Grid Grid.Row="1">
                    <Canvas
                        Width="1200"
                        Height="400"
                        Margin="60,20,20,40"
                        ClipToBounds="False">

                        <ItemsControl ItemsSource="{Binding GridLines}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Canvas />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemContainerStyle>
                                <Style>
                                    <Setter Property="Canvas.Top" Value="{Binding Y}" />
                                </Style>
                            </ItemsControl.ItemContainerStyle>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Line
                                        Stroke="#E2E8F0"
                                        StrokeThickness="1"
                                        X1="0"
                                        X2="1020" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!--  Y-axis Labels  -->
                        <TextBlock
                            Canvas.Left="-50"
                            Canvas.Top="-8"
                            FontSize="12"
                            Foreground="#94A3B8"/>
                        <TextBlock
                            Canvas.Left="-50"
                            Canvas.Top="82"
                            FontSize="12"
                            Foreground="#94A3B8"/>
                        <TextBlock
                            Canvas.Left="-50"
                            Canvas.Top="172"
                            FontSize="12"
                            Foreground="#94A3B8"/>
                        <TextBlock
                            Canvas.Left="-50"
                            Canvas.Top="262"
                            FontSize="12"
                            Foreground="#94A3B8" />
                        <TextBlock
                            Canvas.Left="-30"
                            Canvas.Top="352"
                            FontSize="12"
                            Foreground="#94A3B8"
                            Text="0" />

                        <!--  Chart Line  -->
                        <Polyline
                            Points="{Binding PolylinePoints}"
                            Stroke="#3B82F6"
                            StrokeLineJoin="Round"
                            StrokeThickness="3" />

                        <!--  Data Points  -->
                        <ItemsControl ItemsSource="{Binding DataPoints}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Canvas />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemContainerStyle>
                                <Style>
                                    <Setter Property="Canvas.Left" Value="{Binding X}" />
                                    <Setter Property="Canvas.Top" Value="{Binding Y}" />
                                </Style>
                            </ItemsControl.ItemContainerStyle>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Ellipse
                                        Width="12"
                                        Height="12"
                                        Margin="-6,-6,0,0"
                                        Cursor="Hand"
                                        Fill="#3B82F6"
                                        Stroke="White"
                                        StrokeThickness="2">
                                        <Ellipse.InputBindings>
                                            <MouseBinding
                                                Command="{Binding DataContext.SelectPointCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                CommandParameter="{Binding}"
                                                MouseAction="LeftClick" />
                                        </Ellipse.InputBindings>
                                    </Ellipse>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <Border
                            Canvas.Left="{Binding TooltipX}"
                            Canvas.Top="{Binding TooltipY}"
                            MinWidth="120"
                            Padding="12,10"
                            Background="White"
                            BorderBrush="#E2E8F0"
                            BorderThickness="1"
                            CornerRadius="8"
                            Visibility="{Binding IsTooltipVisible}">
                            <Border.Effect>
                                <DropShadowEffect
                                    BlurRadius="15"
                                    Opacity="0.2"
                                    ShadowDepth="2"
                                    Color="#000000" />
                            </Border.Effect>
                            <StackPanel>
                                <TextBlock
                                    Margin="0,0,0,6"
                                    FontSize="13"
                                    FontWeight="SemiBold"
                                    Foreground="#64748B"
                                    Text="{Binding SelectedPoint.Day}" />
                                <StackPanel Orientation="Horizontal">
                                    <Rectangle
                                        Width="12"
                                        Height="12"
                                        Margin="0,0,8,0"
                                        Fill="#3B82F6"
                                        RadiusX="2"
                                        RadiusY="2" />
                                    <TextBlock
                                        Margin="0,0,8,0"
                                        FontSize="12"
                                        Foreground="#94A3B8"
                                        Text="Word Count:" />
                                    <TextBlock
                                        FontSize="13"
                                        FontWeight="Bold"
                                        Foreground="#0F172A"
                                        Text="{Binding SelectedPoint.WordCount, StringFormat={}{0:N0}}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!--  Vertical Line  -->
                        <Line
                            Stroke="#CBD5E1"
                            StrokeDashArray="4,4"
                            StrokeThickness="1"
                            Visibility="{Binding IsTooltipVisible}"
                            X1="{Binding SelectedPoint.X}"
                            X2="{Binding SelectedPoint.X}"
                            Y1="{Binding SelectedPoint.Y}"
                            Y2="360" />

                        <!--  X-axis Labels  -->
                        <ItemsControl ItemsSource="{Binding DataPoints}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Canvas />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemContainerStyle>
                                <Style>
                                    <Setter Property="Canvas.Left" Value="{Binding X}" />
                                    <Setter Property="Canvas.Top" Value="375" />
                                </Style>
                            </ItemsControl.ItemContainerStyle>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock
                                        Margin="-10,0,0,0"
                                        FontSize="13"
                                        FontWeight="Medium"
                                        Foreground="#64748B"
                                        Text="{Binding Day}"
                                        TextAlignment="Center" />
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                    </Canvas>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
